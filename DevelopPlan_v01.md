# ğŸš€ ë§ˆì¸ë“œ ë‹¤ì´ë²„ - CAVE í”„ë¡œí† íƒ€ì… v0.3 í†µí•© ê¸°ìˆ  ê³„íšì„œ

ë³¸ ë¬¸ì„œëŠ” 'ë§ˆì¸ë“œ ë‹¤ì´ë²„' í”„ë¡œì íŠ¸ì˜ CAVE ì—°ë™ í”„ë¡œí† íƒ€ì…(v0.3) ê°œë°œì„ ìœ„í•œ ê³µì‹ ê¸°ìˆ  ê³„íšì„œì…ë‹ˆë‹¤.
í”„ë¡œì íŠ¸ì˜ ëª©í‘œ, íë¦„, í•˜ë“œì›¨ì–´ êµ¬ì„± ë° ê° Unity ìŠ¤í¬ë¦½íŠ¸ì˜ ì„¸ë¶€ ì‚¬ì–‘ì„ í†µí•©í•˜ì—¬ ì •ì˜í•©ë‹ˆë‹¤.

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1. í”„ë¡œí† íƒ€ì… ëª©í‘œ

* ë¬¼ë¦¬ ìš´ì „ëŒ€ì™€ 3ë©´ XR CAVE (í„°ì¹˜ìŠ¤í¬ë¦°) í•˜ë“œì›¨ì–´ë¥¼ ìœ ë‹ˆí‹° ì—”ì§„ê³¼ ì—°ë™í•©ë‹ˆë‹¤. (VR HMD ë¯¸ì‚¬ìš©)
* ì „ì²´ ê²Œì„ í”Œë¡œìš°(ë©”ì¸ë©”ë‰´ â†’ ì¸íŠ¸ë¡œ â†’ ìºë¦­í„° ì„ íƒ â†’ ê²Œì„ â†’ ì•„ì›ƒíŠ¸ë¡œ â†’ ë©”ì¸ë©”ë‰´)ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
* ì¡°ê±´ë¶€ í„°ì¹˜ ì…ë ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤:
    * ì •ë©´(Screen 0): 'ìºë¦­í„° ì„ íƒ' ì”¬ì—ì„œë§Œ í„°ì¹˜ í™œì„±í™”. 'ê²Œì„ ìŠ¤í…Œì´ì§€' ì¤‘ì—ëŠ” í„°ì¹˜ ë¹„í™œì„±í™” (íŒŒì¼ëŸ¿ ë·°).
    * ì¢Œ/ìš°(Screen 1, 2): 'ê²Œì„ ìŠ¤í…Œì´ì§€' ì¤‘(Phase 1~3)ì—ë§Œ í„°ì¹˜ í™œì„±í™” (í¬ìˆ˜ ì—­í• ).
* ê° í”Œë ˆì´ì–´ì˜ ì…ë ¥(ìš´ì „ëŒ€, í„°ì¹˜)ì´ ê³µìœ ëœ ê²Œì„ í™˜ê²½ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ì§€ ê²€ì¦í•©ë‹ˆë‹¤.

### 1.2. í•˜ë“œì›¨ì–´ í™˜ê²½ ë° ì¡°ì‘ë²•

* **í”Œë«í¼:** Unity PC (Windows Standalone, 3ê°œ ë””ìŠ¤í”Œë ˆì´ í™•ì¥ ëª¨ë“œ)
* **ì‹œì :** 3ë©´ CAVE ìŠ¤í¬ë¦° ì „ì²´ê°€ 'í•¨ì„  ì— íŒŒì‹œì˜ 1ì¸ì¹­ ì¡°ì¢…ì„ ì°½ë¬¸'ì´ ë©ë‹ˆë‹¤. (ëª¨ë“  í”Œë ˆì´ì–´ê°€ ë™ì¼í•œ ë·° ê³µìœ )
* **íŒŒì¼ëŸ¿ ì¡°ì‘ (ë¬¼ë¦¬ ìš´ì „ëŒ€):**
    * í•¸ë“¤ ì¡°í–¥: í•¨ì„  ì¢Œ/ìš° íšŒì „
    * í˜ë‹¬ (ê°€ì†): í•¨ì„  ì „ì§„
    * í˜ë‹¬ (ë¸Œë ˆì´í¬): í•¨ì„  í›„ì§„/ê°ì†
    * íœ  ë²„íŠ¼ 1: ë°©ì–´ë§‰ í™œì„±í™” (Phase 3)
* **í¬ìˆ˜ ì¡°ì‘ (3ë©´ í„°ì¹˜ìŠ¤í¬ë¦°):**
    * ì •ë©´: 'ìºë¦­í„° ì„ íƒ' ì”¬ì—ì„œ Nì´ˆê°„ í„°ì¹˜ í™€ë“œí•˜ì—¬ ìºë¦­í„° ì„ íƒ.
    * ì¢Œ/ìš°: 'ê²Œì„ ìŠ¤í…Œì´ì§€' ì”¬ì—ì„œ íƒ€ê²Ÿ(ì•…í”Œ ë²Œë ˆ, íŒŒí¸, ì•½ì )ì„ ì§ì ‘ í„°ì¹˜.

### 1.3. ìœ ë‹ˆí‹° ì”¬(Scene) êµ¬ì„±

ê²Œì„ì˜ íë¦„ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ìœ ë‹ˆí‹° ì”¬ì„ ë‹¤ìŒê³¼ ê°™ì´ ë¶„ë¦¬í•©ë‹ˆë‹¤. `GameManager`ê°€ ì´ ì”¬ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ë¡œë“œí•©ë‹ˆë‹¤.

* **MainMenuScene:** ë©”ì¸ ë©”ë‰´ UI. (ì •ë©´ ìŠ¤í¬ë¦° ì‚¬ìš©)
* **VideoScene:** ì¸íŠ¸ë¡œ/ì•„ì›ƒíŠ¸ë¡œ ì˜ìƒ ì¬ìƒ. (3ë©´ ìŠ¤í¬ë¦° ë™ì‹œ ì‚¬ìš©)
* **CharacterSelectScene:** ìºë¦­í„° ì„ íƒ UI. (ì •ë©´ ìŠ¤í¬ë¦° í„°ì¹˜ ì‚¬ìš©)
* **GameStageScene:** ì‹¤ì œ ê²Œì„(Phase 1, 2, 3)ì´ ì§„í–‰ë˜ëŠ” ì”¬. (ìš´ì „ëŒ€, ì¢Œ/ìš° í„°ì¹˜ ì‚¬ìš©)
* **ResultScene:** ê²Œì„ í´ë¦¬ì–´/ì˜¤ë²„ ì‹œ ê²°ê³¼ í™”ë©´. (ì •ë©´ ìŠ¤í¬ë¦° ì‚¬ìš©)

---

## 2. í•µì‹¬ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° ê¸°ìˆ  ì‚¬ì–‘

ê° ìŠ¤í¬ë¦½íŠ¸ê°€ êµ¬í˜„í•´ì•¼ í•  êµ¬ì²´ì ì¸ ê¸°ëŠ¥, ê´€ë¦¬ ë°ì´í„°, í•µì‹¬ í•¨ìˆ˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

### 2.1. GameManager.cs

* **íŒŒì¼:** `GameManager.cs`
* **ì”¬:** `DontDestroyOnLoad` (ì‹±ê¸€í†¤)
* **ì—­í• :** ê²Œì„ì˜ ìµœìƒìœ„ ìƒíƒœ(GameState)ì™€ ì”¬(Scene) ì „í™˜ì„ ì´ê´„í•©ë‹ˆë‹¤.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public static GameManager Instance { get; private set; }`
* `public enum GameState { MainMenu, IntroVideo, CharacterSelect, GameStage, OutroVideo, Result }`
* `public GameState currentState;` (í˜„ì¬ ê²Œì„ ìƒíƒœ)
* `[Header("Scene Names")]`
* `public string mainMenuScene = "MainMenuScene";`
* `public string videoScene = "VideoScene";`
* `public string characterSelectScene = "CharacterSelectScene";`
* `public string gameStageScene = "GameStageScene";`
* `public string resultScene = "ResultScene";`

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `private void Awake()`: ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ì„¤ì • ë° `DontDestroyOnLoad` ì²˜ë¦¬.
* `public void Start()`: ê²Œì„ ì‹œì‘ ì‹œ `ChangeState(GameState.MainMenu)`ë¥¼ í˜¸ì¶œí•˜ì—¬ ë©”ì¸ ë©”ë‰´ ì”¬ìœ¼ë¡œ ì§„ì….
* `public void ChangeState(GameState newState)`:
    * `currentState = newState;`
    * `switch (newState)` ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ `newState`ì— ë§ëŠ” `SceneManager.LoadSceneAsync()` í˜¸ì¶œ.
    * (ì˜ˆ: `case GameState.MainMenu: SceneManager.LoadSceneAsync(mainMenuScene);`)
* `public void QuitGame()`: `Application.Quit()`ì„ í˜¸ì¶œí•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ (ë©”ì¸ ë©”ë‰´ ë“±ì—ì„œ ì‚¬ìš©).
* `public void TakeDamage(int amount)`:
    * `DataManager.Instance.TakeDamage(amount);` // ë°ë¯¸ì§€ ì²˜ë¦¬ë¥¼ DataManagerë¡œ ìœ„ì„
* `public void AddScore(int amount)`:
    * `DataManager.Instance.AddScore(amount);` // ì ìˆ˜ ì²˜ë¦¬ë¥¼ DataManagerë¡œ ìœ„ì„

### 2.2. GunnerInputManager.cs

* **íŒŒì¼:** `GunnerInputManager.cs`
* **ì”¬:** `DontDestroyOnLoad` (ì‹±ê¸€í†¤)
* **ì—­í• :** CAVEì˜ 3ë©´ í„°ì¹˜ìŠ¤í¬ë¦° ì…ë ¥ì„ ë…ì ì ìœ¼ë¡œ ìˆ˜ì‹ í•˜ê³ , í˜„ì¬ `GameState`ì™€ `Screen ID`ì— ë”°ë¼ ì…ë ¥ì„ ì˜¬ë°”ë¥¸ ë§¤ë‹ˆì €ë¡œ ë¶„ë°°í•©ë‹ˆë‹¤.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public static GunnerInputManager Instance { get; private set; }`
* `[Header("CAVE Cameras")]`
* `public Camera cam_Front;`
* `public Camera cam_Left;`
* `public Camera cam_Right;`

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `private void Awake()`: ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ì„¤ì •.
* `public void OnCaveTouchReceived(int screenID, Vector2 touchPosition, TouchPhase touchPhase)`: (ê°€ì¥ ì¤‘ìš”) CAVE í•˜ë“œì›¨ì–´ SDKê°€ í„°ì¹˜ë¥¼ ê°ì§€í•  ë•Œë§ˆë‹¤ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.
    * `GameState state = GameManager.Instance.currentState;`
    * `if (state == GameState.CharacterSelect && screenID == 0): FindObjectOfType<CharacterSelectManager>()?.ProcessTouch(touchPosition, touchPhase);` // ìºë¦­í„° ì„ íƒ ì”¬ (ì •ë©´)
    * `else if (state == GameState.GameStage && (screenID == 1 || screenID == 2)) : ProcessGameRaycast(screenID == 1 ? cam_Left : cam_Right, touchPosition);` // ê²Œì„ ì¤‘ (ì¢Œ/ìš°)
    * `else if ((state == GameState.MainMenu || state == GameState.Result) && screenID == 0): ProcessUIRaycast(cam_Front, touchPosition);` // UI ì”¬ (ì •ë©´)
* `private void ProcessGameRaycast(Camera cam, Vector2 pos)`:
    * `Ray ray = cam.ScreenPointToRay(pos);`
    * `if (Physics.Raycast(ray, out RaycastHit hit, 100f))`
    * `Target target = hit.collider.GetComponent<Target>();`
    * `if (target != null) { target.OnHit(); }`
* `private void ProcessUIRaycast(Camera cam, Vector2 pos)`:
    * // Unityì˜ EventSystemì„ ì‚¬ìš©í•˜ì—¬ UI ë²„íŠ¼ í´ë¦­ì„ ì²˜ë¦¬í•˜ëŠ” ë¡œì§. PhysicsRaycaster ë˜ëŠ” GraphicRaycaster í™œìš©.

### 2.3. PlayerShipController.cs

* **íŒŒì¼:** `PlayerShipController.cs`
* **ì”¬:** `GameStageScene` (í”Œë ˆì´ì–´ í•¨ì„  í”„ë¦¬íŒ¹)
* **ì—­í• :** ë¬¼ë¦¬ ìš´ì „ëŒ€(í•¸ë“¤, í˜ë‹¬, ë²„íŠ¼)ì˜ ì…ë ¥ì„ ë°›ì•„ í•¨ì„ ì˜ ì´ë™, íšŒì „, ë°©ì–´ë§‰ì„ ì œì–´í•©ë‹ˆë‹¤.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public float moveSpeed = 30f;`
* `public float turnSpeed = 45f;`
* `public GameObject shieldEffect;`
* `public string pedalAxisName = "Vertical";` // (Unity Input Manager ì„¤ì • í•„ìš”)
* `public string wheelAxisName = "Horizontal";` // (Unity Input Manager ì„¤ì • í•„ìš”)
* `public string shieldButtonName = "ShieldButton";` // (Unity Input Manager ì„¤ì • í•„ìš”)

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `private void Start()`: `shieldEffect.SetActive(false);`
* `private void Update()`:
    * `float pedalInput = Input.GetAxis(pedalAxisName);`
    * `float wheelInput = Input.GetAxis(wheelAxisName);`
    * // í•¨ì„  ì´ë™ ë¡œì§ (Translate ë˜ëŠ” Rigidbody.MovePosition)
    * `transform.Translate(Vector3.forward * pedalInput * moveSpeed * Time.deltaTime);`
    * `transform.Rotate(Vector3.up * wheelInput * turnSpeed * Time.deltaTime);`
    * `if (Input.GetButtonDown(shieldButtonName)) { ActivateShield(); }`
* `private void ActivateShield()`:
    * // (ì˜ˆ: 3ì´ˆê°„ ë°©ì–´ë§‰ í™œì„±í™”)
    * `StartCoroutine(ShieldRoutine());`
* `private IEnumerator ShieldRoutine()`:
    * `shieldEffect.SetActive(true);`
    * `yield return new WaitForSeconds(3f);`
    * `shieldEffect.SetActive(false);`
* `private void OnTriggerEnter(Collider other)`:
    * `if (other.CompareTag("LargeSpike"))` // 'LargeSpike' íƒœê·¸ê°€ ìˆëŠ” ì¥ì• ë¬¼
    * `GameManager.Instance.TakeDamage(20);` // DataManagerê°€ ì²˜ë¦¬

### 2.4. StageManager.cs

* **íŒŒì¼:** `StageManager.cs`
* **ì”¬:** `GameStageScene`
* **ì—­í• :** `GameStageScene` ë‚´ë¶€ì˜ í˜ì´ì¦ˆ(Phase 1, 2, 3) ì§„í–‰ê³¼ ì „í™˜ ì¡°ê±´ì„ ê´€ë¦¬í•˜ëŠ” 'ì„œë¸Œ ë§¤ë‹ˆì €'.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public enum TransitionCondition { Time, Kills, TimeOrKills }`
* `public enum GamePhase { Phase1, Phase2, Phase3_Boss, None }`
* `private GamePhase currentGamePhase = GamePhase.None;`
* `[Header("Phase 1 Settings")]`
* `public TransitionCondition phase1_ConditionType = TransitionCondition.Time;`
* `public float phase1_TimeLimit = 80f;`
* `public int phase1_KillTarget = 50;`
* `[Header("Phase 2 Settings")]`
* `public TransitionCondition phase2_ConditionType = TransitionCondition.Time;`
* `public float phase2_TimeLimit = 110f;`
* `public int phase2_KillTarget = 100;`
* `[Header("References")]`
* `public EnemyManager enemyManager;`
* `public AudioManager audioManager;`
* `public BossAI bossAI;` // (ë³´ìŠ¤ AI ì°¸ì¡°)
* `private float phaseTimer;`
* `private int currentPhaseKills;`

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `public void Start()`:
    * `DataManager.Instance.StartGameTimerAndResetStats();`
    * `StartPhase(GamePhase.Phase1);`
* `public void StartPhase(GamePhase phase)`:
    * `currentGamePhase = phase;`
    * `phaseTimer = 0f;`
    * `currentPhaseKills = 0;`
    * `switch (phase):`
        * `case GamePhase.Phase1:`
            * `enemyManager.StartSpawning(TargetType.SpamMite);`
            * `audioManager.ChangeBGM(audioManager.bgm_Phase1);` // (AudioManagerì—ì„œ BGM ì°¸ì¡°)
            * `break;`
        * `case GamePhase.Phase2:`
            * `enemyManager.StopSpawning();`
            * `enemyManager.StartSpawning(TargetType.SmallSpike);`
            * `enemyManager.StartSpawning(TargetType.LargeSpike);`
            * `audioManager.ChangeBGM(audioManager.bgm_Phase2);`
            * `break;`
        * `case GamePhase.Phase3_Boss:`
            * `enemyManager.StopSpawning();`
            * `enemyManager.SpawnBoss();`
            * `bossAI = FindObjectOfType<BossAI>();` // (ìŠ¤í°ëœ ë³´ìŠ¤ ì°¸ì¡°)
            * `audioManager.ChangeBGM(audioManager.bgm_Boss);`
            * `break;`
* `public void IncrementPhaseKillCount()`: `currentPhaseKills++;`
* `private void Update()`:
    * `if (currentGamePhase == GamePhase.Phase1): CheckPhaseTransition(phase1_ConditionType, phase1_TimeLimit, phase1_KillTarget, GamePhase.Phase2);`
    * `else if (currentGamePhase == GamePhase.Phase2): CheckPhaseTransition(phase2_ConditionType, phase2_TimeLimit, phase2_KillTarget, GamePhase.Phase3_Boss);`
    * `else if (currentGamePhase == GamePhase.Phase3_Boss):`
        * `if (bossAI != null && bossAI.IsDead())` // IsDead()ëŠ” BossAIì— êµ¬í˜„ í•„ìš”
        * `DataManager.Instance.StopGameTimer();`
        * `GameManager.Instance.ChangeState(GameState.OutroVideo);`
* `private void CheckPhaseTransition(TransitionCondition type, float timeLimit, int killTarget, GamePhase nextPhase)`:
    * `bool timeMet = (phaseTimer += Time.deltaTime) >= timeLimit;`
    * `bool killsMet = currentPhaseKills >= killTarget;`
    * `if ((type == TransitionCondition.Time && timeMet) || (type == TransitionCondition.Kills && killsMet) || (type == TransitionCondition.TimeOrKills && (timeMet || killsMet)))`
    * `StartPhase(nextPhase);`

### 2.5. VideoPlayerManager.cs

* **íŒŒì¼:** `VideoPlayerManager.cs`
* **ì”¬:** `VideoScene`
* **ì—­í• :** ì¸íŠ¸ë¡œ/ì•„ì›ƒíŠ¸ë¡œ ë¹„ë””ì˜¤ë¥¼ 3ë©´ ìŠ¤í¬ë¦°ì— ë™ê¸°í™”í•˜ì—¬ ì¬ìƒí•©ë‹ˆë‹¤.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public VideoPlayer videoPlayer_Front, videoPlayer_Left, videoPlayer_Right;`
* `public VideoClip introClip, outroClip;`

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `private void Start()`:
    * `videoPlayer_Front.loopPointReached += OnVideoEnd;` // ë©”ì¸ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ì— ì´ë²¤íŠ¸ êµ¬ë…
    * `VideoClip clipToPlay = (GameManager.Instance.currentState == GameState.IntroVideo) ? introClip : outroClip;`
    * `PlayVideo(clipToPlay);`
* `private void PlayVideo(VideoClip clip)`:
    * `videoPlayer_Front.clip = clip; videoPlayer_Left.clip = clip; videoPlayer_Right.clip = clip;`
    * `videoPlayer_Front.Play(); videoPlayer_Left.Play(); videoPlayer_Right.Play();`
* `private void OnVideoEnd(VideoPlayer vp)`:
    * `if (GameManager.Instance.currentState == GameState.IntroVideo):`
        * `GameManager.Instance.ChangeState(GameState.CharacterSelect);`
    * `else if (GameManager.Instance.currentState == GameState.OutroVideo):`
        * `GameManager.Instance.ChangeState(GameState.Result);`

### 2.6. CharacterSelectManager.cs

* **íŒŒì¼:** `CharacterSelectManager.cs`
* **ì”¬:** `CharacterSelectScene`
* **ì—­í• :** ì •ë©´ ìŠ¤í¬ë¦°ì˜ í„°ì¹˜ ì…ë ¥ì„ ë°›ì•„ 'Nì´ˆê°„ í™€ë“œ'í•˜ì—¬ ìºë¦­í„°ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public float touchHoldTime = 0f;`
* `public float requiredHoldTime = 3f;`
* `public int selectedCharacterID = 0;`
* `public Slider holdSlider;` // (í„°ì¹˜ í™€ë“œ ì§„í–‰ë¥ ì„ í‘œì‹œí•  UI ìŠ¬ë¼ì´ë”)

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `public void ProcessTouch(Vector2 pos, TouchPhase phase)`: (GunnerInputManagerë¡œë¶€í„° í˜¸ì¶œë¨)
    * // Raycastë¥¼ í†µí•´ í„°ì¹˜ëœ ëŒ€ìƒì´ 'ìºë¦­í„° ì„ íƒ ë²„íŠ¼'ì¸ì§€ í™•ì¸
    * `if (phase == TouchPhase.Began): touchHoldTime = 0f;`
    * `if (phase == TouchPhase.Stationary || phase == TouchPhase.Moved):`
        * `touchHoldTime += Time.deltaTime;`
        * `holdSlider.value = touchHoldTime / requiredHoldTime;`
        * `if (touchHoldTime >= requiredHoldTime): ConfirmSelection();`
    * `if (phase == TouchPhase.Ended): touchHoldTime = 0f; holdSlider.value = 0f;`
* `public void SelectCharacter(int id)`: `selectedCharacterID = id;` (UI ë²„íŠ¼ì—ì„œ í˜¸ì¶œ)
* `private void ConfirmSelection()`:
    * `DataManager.Instance.SetPlayerCharacter(selectedCharacterID);`
    * `GameManager.Instance.ChangeState(GameState.GameStage);`

### 2.7. Target.cs

* **íŒŒì¼:** `Target.cs`
* **ì”¬:** `GameStageScene` (ì , ìì› í”„ë¦¬íŒ¹)
* **ì—­í• :** í¬ìˆ˜ê°€ í„°ì¹˜(íŒŒê´´/ìˆ˜ì§‘)í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì˜¤ë¸Œì íŠ¸ì˜ ê¸°ë°˜ ìŠ¤í¬ë¦½íŠ¸.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public enum TargetType { SpamMite, BufferResource, DebufferResource, SmallSpike, BossWeakpoint }`
* `public TargetType type;`
* `private GameManager gameManager;`
* `private DataManager dataManager;`
* `private StageManager stageManager;`
* `private AudioManager audioManager;`

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `private void Start()`: `gameManager = GameManager.Instance; dataManager = DataManager.Instance; stageManager = FindObjectOfType<StageManager>(); audioManager = AudioManager.Instance;` (ëª¨ë“  ë§¤ë‹ˆì € ì°¸ì¡° ìºì‹±)
* `public void OnHit()`: (GunnerInputManagerë¡œë¶€í„° í˜¸ì¶œë¨)
    * `switch (type):`
        * `case SpamMite:`
            * `gameManager.AddScore(10);`
            * `dataManager.IncrementKillCount();`
            * `stageManager.IncrementPhaseKillCount();`
            * `audioManager.PlaySound("Splat");`
            * `Destroy(gameObject);`
            * `break;`
        * `case BufferResource:`
            * `dataManager.AddBuffer(1);`
            * `audioManager.PlaySound("Collect");`
            * `Destroy(gameObject);`
            * `break;`
        * `case DebufferResource:`
            * `dataManager.AddDebuffer(1);`
            * `audioManager.PlaySound("Collect");`
            * `Destroy(gameObject);`
            * `break;`
        * `case SmallSpike:`
            * `gameManager.AddScore(5);`
            * `dataManager.IncrementKillCount();`
            * `stageManager.IncrementPhaseKillCount();`
            * `audioManager.PlaySound("Splat");`
            * `Destroy(gameObject);`
            * `break;`
        * `case BossWeakpoint:`
            * `stageManager.bossAI?.TakeDamage(10);` // BossAIì— TakeDamage(int) êµ¬í˜„ í•„ìš”
            * `audioManager.PlaySound("Hit_Boss");`
            * `break;`

### 2.8. EnemyManager.cs

* **íŒŒì¼:** `EnemyManager.cs`
* **ì”¬:** `GameStageScene`
* **ì—­í• :** `StageManager`ì˜ ì§€ì‹œì— ë”°ë¼ ì /ìì›/ì¥ì• ë¬¼ì„ ìŠ¤í°í•©ë‹ˆë‹¤.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public GameObject spamMitePrefab, largeSpikePrefab, smallSpikePrefab, bufferPrefab, debufferPrefab, bossPrefab;`
* `public Transform[] spawnPoints_Left, spawnPoints_Right;`
* `private bool isSpawning = false;`

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `public void StartSpawning(TargetType type)`:
    * `isSpawning = true;`
    * `StartCoroutine(SpawnRoutine(type));`
* `public void StopSpawning()`: `isSpawning = false; StopAllCoroutines();`
* `private IEnumerator SpawnRoutine(TargetType type)`:
    * `while (isSpawning)`
    * `GameObject prefab = GetPrefab(type);`
    * `Transform[] points = (Random.Range(0, 2) == 0) ? spawnPoints_Left : spawnPoints_Right;`
    * `Transform spawnPoint = points[Random.Range(0, points.Length)];`
    * `Instantiate(prefab, spawnPoint.position, spawnPoint.rotation);`
    * `yield return new WaitForSeconds(GetSpawnDelay(type));`
* `public void SpawnBoss()`: `Instantiate(bossPrefab, ...);`
* `private GameObject GetPrefab(TargetType type)`: `switch` ë¬¸ìœ¼ë¡œ í”„ë¦¬íŒ¹ ë°˜í™˜.
* `private float GetSpawnDelay(TargetType type)`: `switch` ë¬¸ìœ¼ë¡œ ìŠ¤í° ë”œë ˆì´ ë°˜í™˜.

### 2.9. DataManager.cs

* **íŒŒì¼:** `DataManager.cs`
* **ì”¬:** `DontDestroyOnLoad` (ì‹±ê¸€í†¤)
* **ì—­í• :** ê²Œì„ ì¬í™”(ë²„í”„/ë””ë²„í”„)ì™€ ê²Œì„ í”Œë ˆì´ ì„±ê³¼(í†µê³„)ë¥¼ ê´€ë¦¬í•˜ê³  ì”¬ ê°„ì— ìœ ì§€í•©ë‹ˆë‹¤.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public static DataManager Instance { get; private set; }`
* `[Header("Game Stats (for Result)")]`
* `public float totalPlayTime;`
* `public int totalEnemiesKilled;`
* `public int totalBuffersAcquired;`
* `public int totalDebuffersAcquired;`
* `public int totalDamageTaken;`
* `public int selectedCharacterID;`
* `private bool isTimerRunning = false;`
* `[Header("In-Game Currency")]`
* `public int bufferCharge;`
* `public int debufferCharge;`
* `public int maxCharge = 10;`
* `public int shipShield = 100;`
* `public int maxShipShield = 100;`
* `public int teamScore = 0;`

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `private void Awake()`: ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ì„¤ì •.
* `public void StartGameTimerAndResetStats()`:
    * `totalPlayTime = 0f; totalEnemiesKilled = 0; totalBuffersAcquired = 0; ...` (ëª¨ë“  í†µê³„ 0ìœ¼ë¡œ ì´ˆê¸°í™”)
    * `bufferCharge = 0; debufferCharge = 0; teamScore = 0; shipShield = maxShipShield;`
    * `isTimerRunning = true;`
* `public void StopGameTimer()`: `isTimerRunning = false;`
* `private void Update()`: `if (isTimerRunning) { totalPlayTime += Time.deltaTime; }`
* `public void IncrementKillCount()`: `totalEnemiesKilled++;`
* `public void AddBuffer(int amount)`:
    * `bufferCharge = Mathf.Min(bufferCharge + amount, maxCharge);`
    * `totalBuffersAcquired++;`
    * `FindObjectOfType<UIManager_GameStage>()?.UpdateBufferUI(bufferCharge, maxCharge);`
* `public void AddDebuffer(int amount)`: (AddBufferì™€ ìœ ì‚¬)
* `public void TakeDamage(int amount)`:
    * `shipShield -= amount;`
    * `totalDamageTaken += amount;`
    * `FindObjectOfType<UIManager_GameStage>()?.UpdateShieldUI(shipShield, maxShipShield);`
    * `if (shipShield <= 0) { GameManager.Instance.ChangeState(GameState.Result); }` // (ê²Œì„ ì˜¤ë²„)
* `public void AddScore(int amount)`: `teamScore += amount;`
* `public void SetPlayerCharacter(int id)`: `selectedCharacterID = id;`

### 2.10. UIManager_...cs (ì”¬ë³„ UI ë§¤ë‹ˆì €)

* **íŒŒì¼:** `UIManager_MainMenu.cs`, `UIManager_GameStage.cs`, `UIManager_Result.cs` ë“±
* **ì”¬:** ê°ìì˜ ì”¬ (`MainMenuScene`, `GameStageScene`, `ResultScene`)
* **ì—­í• :** ê° ì”¬ì— í•„ìš”í•œ UI ìš”ì†Œë¥¼ ì œì–´í•©ë‹ˆë‹¤.

#### í•µì‹¬ ê¸°ëŠ¥ (UIManager\_GameStage.cs)

* `public Slider shieldSlider;, public Slider bufferSlider;, public Slider debufferSlider;, public TextMeshProUGUI scoreText;`
* `public void UpdateShieldUI(int current, int max)`: `shieldSlider.value = (float)current / max;`
* `public void UpdateBufferUI(int current, int max)`: `bufferSlider.value = (float)current / max;`
* `public void UpdateScoreUI(int score)`: `scoreText.text = "SCORE: " + score;`

#### í•µì‹¬ ê¸°ëŠ¥ (UIManager\_Result.cs)

* `public TextMeshProUGUI playTimeText, killsText, buffsText, damageText;`
* `public Button backToMenuButton;`
* `private void Start()`:
    * `DataManager data = DataManager.Instance;`
    * `playTimeText.text = "í”Œë ˆì´ ì‹œê°„: " + data.totalPlayTime.ToString("F0") + "ì´ˆ";`
    * `killsText.text = "ì²˜ì¹˜í•œ ì : " + data.totalEnemiesKilled.ToString();`
    * `buffsText.text = "íšë“í•œ ë²„í”„: " + data.totalBuffersAcquired.ToString();`
    * `damageText.text = "ë°›ì€ ë°ë¯¸ì§€: " + data.totalDamageTaken.ToString();`
    * `backToMenuButton.onClick.AddListener(() => GameManager.Instance.ChangeState(GameState.MainMenu));`

### 2.11. CAVE_DisplayManager.cs

* **íŒŒì¼:** `CAVE_DisplayManager.cs`
* **ì”¬:** `DontDestroyOnLoad` (ì‹±ê¸€í†¤)
* **ì—­í• :** 3ê°œì˜ ìœ ë‹ˆí‹° ì¹´ë©”ë¼ë¥¼ 3ê°œì˜ ë¬¼ë¦¬ì  ë””ìŠ¤í”Œë ˆì´(ëª¨ë‹ˆí„°)ì— ë§¤í•‘í•©ë‹ˆë‹¤.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public Camera cam_Front, cam_Left, cam_Right;`

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `private void Start()`:
    * `if (Display.displays.Length > 0) cam_Front.targetDisplay = 0;` // 1ë²ˆ ë””ìŠ¤í”Œë ˆì´ (ì •ë©´)
    * `if (Display.displays.Length > 1) cam_Left.targetDisplay = 1;` // 2ë²ˆ ë””ìŠ¤í”Œë ˆì´ (ì¢Œì¸¡)
    * `if (Display.displays.Length > 2) cam_Right.targetDisplay = 2;` // 3ë²ˆ ë””ìŠ¤í”Œë ˆì´ (ìš°ì¸¡)
    * // (í•„ìš” ì‹œ) ê° ì¹´ë©”ë¼ì˜ FOV, ê°ë„ë¥¼ CAVE í™˜ê²½ì— ë§ê²Œ ì¡°ì •.

### 2.12. AudioManager.cs

* **íŒŒì¼:** `AudioManager.cs`
* **ì”¬:** `DontDestroyOnLoad` (ì‹±ê¸€í†¤)
* **ì—­í• :** ëª¨ë“  ë°°ê²½ìŒì•…(BGM)ê³¼ íš¨ê³¼ìŒ(SFX)ì„ ì¬ìƒí•©ë‹ˆë‹¤.

#### í•µì‹¬ ê´€ë¦¬ ë°ì´í„°

* `public static AudioManager Instance { get; private set; }`
* `public AudioSource bgmSource, sfxSource;`
* `[Header("Audio Clips")]`
* `public AudioClip bgm_Menu, bgm_Phase1, bgm_Phase2, bgm_Boss;`
* `public AudioClip sfx_Splat, sfx_Collect, sfx_ShieldHit, sfx_Click, sfx_Hit_Boss;`

#### í•µì‹¬ ê¸°ëŠ¥ ë° í•¨ìˆ˜

* `private void Awake()`: ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ì„¤ì •.
* `public void PlaySound(string soundName)`:
    * `switch (soundName):`
        * `case "Splat": sfxSource.PlayOneShot(sfx_Splat); break;`
        * `case "Collect": sfxSource.PlayOneShot(sfx_Collect); break;`
        * `case "Hit_Boss": sfxSource.PlayOneShot(sfx_Hit_Boss); break;`
        * // ... (ë‹¤ë¥¸ íš¨ê³¼ìŒ ì¼€ì´ìŠ¤ ì¶”ê°€) ...
* `public void ChangeBGM(AudioClip clip)`:
    * `bgmSource.Stop();`
    * `bgmSource.clip = clip;`
    * `bgGAmSource.Play();`